@using System.Web
@using Microsoft.AspNetCore.Authorization
@* @attribute [AllowAnonymous] THE BANE OF EXISTENCE FOR THE PAST FEW WEEKS*@
@inject NavigationManager NavigationManager

@code 
{
    protected override async Task OnInitializedAsync()
    {
        var returnUrl = NavigationManager.ToBaseRelativePath(NavigationManager.Uri);
        if (string.IsNullOrEmpty(returnUrl))
        {
            returnUrl = "/";
        }

        NavigationManager.NavigateTo("/account/login?returnUrl=" + HttpUtility.UrlEncode(returnUrl), forceLoad: true);
    }
}
